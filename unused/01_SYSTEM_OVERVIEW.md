# Multi-Wizard Platform - System Overview

## Project Description

A comprehensive Multi-Wizard Platform that allows administrators to create, configure, and manage multiple step-by-step wizards through a web interface. Users can complete wizards, save their progress, create templates, and replay previous sessions.

## Technology Stack

### Backend
- **Language**: Python 3.11+
- **Framework**: FastAPI
- **Database**: PostgreSQL 15+
- **ORM**: SQLAlchemy 2.0
- **Authentication**: JWT (JSON Web Tokens)
- **Password Hashing**: bcrypt
- **Validation**: Pydantic v2

### Frontend
- **Framework**: React 18+
- **Language**: TypeScript
- **State Management**: React Context API + React Query
- **Routing**: React Router v6
- **UI Components**: Material-UI (MUI) v5
- **Forms**: React Hook Form + Zod validation
- **HTTP Client**: Axios
- **Styling**: CSS Modules + MUI styled components

### DevOps & Tools
- **API Documentation**: OpenAPI/Swagger (auto-generated by FastAPI)
- **Database Migrations**: Alembic
- **Environment Management**: python-dotenv
- **CORS**: FastAPI CORS middleware
- **Code Formatting**: Black (Python), Prettier (TypeScript)
- **Package Management**: pip + requirements.txt (Backend), npm (Frontend)

## System Architecture
```
┌─────────────────────────────────────────────────────────────┐
│                     CLIENT LAYER                             │
│  ┌──────────────────────────────────────────────────────┐   │
│  │              React Frontend (Port 3000)               │   │
│  │  - Admin Dashboard (Wizard Management)                │   │
│  │  - User Dashboard (Session Management)                │   │
│  │  - Wizard Player (Step-by-step Interface)             │   │
│  │  - Template Library                                   │   │
│  └──────────────────┬───────────────────────────────────┘   │
└─────────────────────┼───────────────────────────────────────┘
                      │
                      │ REST API (HTTP/JSON)
                      │
┌─────────────────────▼───────────────────────────────────────┐
│                   API LAYER                                  │
│  ┌──────────────────────────────────────────────────────┐   │
│  │          FastAPI Backend (Port 8000)                  │   │
│  │  - Authentication & Authorization                     │   │
│  │  - Wizard Management APIs                             │   │
│  │  - Session Management APIs                            │   │
│  │  - User Management APIs                               │   │
│  │  - Analytics APIs                                     │   │
│  └──────────────────┬───────────────────────────────────┘   │
└─────────────────────┼───────────────────────────────────────┘
                      │
                      │ SQLAlchemy ORM
                      │
┌─────────────────────▼───────────────────────────────────────┐
│                  DATA LAYER                                  │
│  ┌──────────────────────────────────────────────────────┐   │
│  │          PostgreSQL Database (Port 5432)              │   │
│  │  - 16 Core Tables                                     │   │
│  │  - Foreign Key Relationships                          │   │
│  │  - Indexes for Performance                            │   │
│  │  - JSON Fields for Flexibility                        │   │
│  └──────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
```

## Core Features

### 1. Wizard Management (Admin)
- Create/Edit/Delete wizards
- Configure wizard metadata (name, description, icon, category)
- Set wizard-level settings (allow templates, require login, etc.)
- View wizard analytics

### 2. Step Management (Admin)
- Add/Edit/Delete steps within wizards
- Configure step properties (required, skippable, navigation)
- Set step order and dependencies
- Add help text and descriptions

### 3. Option Set Management (Admin)
- Create option sets within steps
- Configure selection types (single, multiple, text input, etc.)
- Set min/max selection limits
- Define validation rules

### 4. Option Management (Admin)
- Add/Edit/Delete options within option sets
- Set option properties (label, description, price)
- Configure option dependencies
- Set default and recommended options

### 5. Flow Rules (Admin)
- Define navigation between steps
- Set conditional flows based on selections
- Configure required vs optional paths

### 6. User Session Management
- Start new wizard sessions with custom names
- Save progress and resume later
- View all sessions across all wizards
- Complete sessions and view summaries

### 7. Template System
- Save completed sessions as templates
- Browse personal and public templates
- Replay sessions from templates
- Share templates with other users

### 8. Analytics Dashboard
- Wizard completion rates
- Average completion times
- Step abandonment analysis
- User engagement metrics

## User Roles

### Super Admin
- Full system access
- Create/manage wizards, steps, options
- View all user sessions
- Access analytics dashboard
- Manage user accounts

### Admin
- Create/manage wizards
- View analytics for their wizards
- Cannot access user management

### User
- Complete wizards
- Save/manage their sessions
- Create personal templates
- View their own analytics

## Security Features

1. **Authentication**: JWT-based authentication
2. **Authorization**: Role-based access control (RBAC)
3. **Password Security**: bcrypt hashing
4. **Data Privacy**: User control over data storage
5. **Session Management**: Token expiration and refresh
6. **Input Validation**: Pydantic models for all inputs
7. **SQL Injection Prevention**: SQLAlchemy ORM parameterized queries
8. **XSS Protection**: React's built-in escaping

## Project Structure
```
multi-wizard-platform/
├── backend/
│   ├── app/
│   │   ├── __init__.py
│   │   ├── main.py                 # FastAPI app entry point
│   │   ├── config.py               # Configuration management
│   │   ├── database.py             # Database connection
│   │   ├── models/                 # SQLAlchemy models
│   │   │   ├── __init__.py
│   │   │   ├── wizard.py
│   │   │   ├── user.py
│   │   │   ├── session.py
│   │   │   └── ...
│   │   ├── schemas/                # Pydantic schemas
│   │   │   ├── __init__.py
│   │   │   ├── wizard.py
│   │   │   ├── user.py
│   │   │   └── ...
│   │   ├── api/                    # API routes
│   │   │   ├── __init__.py
│   │   │   ├── deps.py             # Dependencies
│   │   │   ├── v1/
│   │   │   │   ├── __init__.py
│   │   │   │   ├── auth.py
│   │   │   │   ├── wizards.py
│   │   │   │   ├── sessions.py
│   │   │   │   ├── users.py
│   │   │   │   └── ...
│   │   ├── crud/                   # CRUD operations
│   │   │   ├── __init__.py
│   │   │   ├── wizard.py
│   │   │   ├── user.py
│   │   │   └── ...
│   │   ├── core/                   # Core utilities
│   │   │   ├── __init__.py
│   │   │   ├── security.py        # JWT, password hashing
│   │   │   └── config.py
│   │   └── utils/                  # Helper functions
│   │       ├── __init__.py
│   │       └── validators.py
│   ├── alembic/                    # Database migrations
│   │   ├── versions/
│   │   └── env.py
│   ├── tests/                      # Backend tests
│   ├── requirements.txt
│   ├── .env.example
│   └── alembic.ini
├── frontend/
│   ├── public/
│   ├── src/
│   │   ├── components/             # Reusable components
│   │   │   ├── common/
│   │   │   ├── wizard/
│   │   │   └── admin/
│   │   ├── pages/                  # Page components
│   │   │   ├── LoginPage.tsx
│   │   │   ├── DashboardPage.tsx
│   │   │   ├── WizardPlayerPage.tsx
│   │   │   ├── AdminWizardPage.tsx
│   │   │   └── ...
│   │   ├── contexts/               # React contexts
│   │   │   ├── AuthContext.tsx
│   │   │   └── WizardContext.tsx
│   │   ├── hooks/                  # Custom hooks
│   │   │   ├── useAuth.ts
│   │   │   ├── useWizard.ts
│   │   │   └── ...
│   │   ├── services/               # API services
│   │   │   ├── api.ts
│   │   │   ├── auth.service.ts
│   │   │   ├── wizard.service.ts
│   │   │   └── ...
│   │   ├── types/                  # TypeScript types
│   │   │   ├── wizard.types.ts
│   │   │   ├── user.types.ts
│   │   │   └── ...
│   │   ├── utils/                  # Utility functions
│   │   ├── App.tsx
│   │   └── index.tsx
│   ├── package.json
│   ├── tsconfig.json
│   └── .env.example
├── docs/                           # Documentation
│   ├── API_DOCUMENTATION.md
│   ├── USER_GUIDE.md
│   └── ADMIN_GUIDE.md
├── docker-compose.yml              # Docker configuration
├── .gitignore
└── README.md
```

## Development Workflow

1. **Setup Phase**: Install dependencies, configure environment
2. **Database Phase**: Create schema, run migrations, seed data
3. **Backend Phase**: Implement models, CRUD, API endpoints
4. **Frontend Phase**: Build UI components, integrate APIs
5. **Testing Phase**: Unit tests, integration tests
6. **Deployment Phase**: Docker containerization, deployment

## Performance Considerations

1. **Database Indexing**: Proper indexes on foreign keys and frequently queried columns
2. **API Pagination**: All list endpoints support pagination
3. **Caching**: React Query for client-side caching
4. **Lazy Loading**: Code splitting in React
5. **Database Connection Pooling**: SQLAlchemy connection pool
6. **Async Operations**: FastAPI async endpoints for I/O operations

## Next Steps

Refer to the following documents for detailed implementation:
1. `02_DATABASE_SCHEMA.md` - Complete PostgreSQL schema
2. `03_SAMPLE_DATA.md` - Seed data for testing
3. `04_BACKEND_IMPLEMENTATION.md` - FastAPI implementation guide
4. `05_FRONTEND_IMPLEMENTATION.md` - React implementation guide
5. `06_FLOW_DIAGRAMS.md` - Visual flow diagrams
6. `07_IMPLEMENTATION_PLAN.md` - Step-by-step implementation roadmap